<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Indian Railway | Home</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background-color: #f8fafc;
    }

    /* Navbar */
    .navbar {
      background-color: #fff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      padding: 0.8rem 2rem;
    }

    .navbar-brand img {
      height: 38px;
      margin-right: 10px;
    }

    .navbar-brand span {
      font-weight: 600;
      font-size: 1.25rem;
      color: #0d6efd;
    }

    .navbar-nav .nav-link {
      color: #222 !important;
      font-weight: 500;
      margin: 0 14px;
      font-size: 1rem;
      transition: 0.2s;
    }

    .navbar-nav .nav-link:hover {
      color: #0d6efd !important;
    }

    /* Right-side Buttons */
    .navbar-buttons .btn {
      border-radius: 8px;
      font-weight: 500;
      padding: 6px 18px;
      font-size: 0.95rem;
    }

    .btn-app {
      border: 1px solid #0d6efd;
      background: transparent;
      color: #0d6efd;
      transition: 0.3s;
    }

    .btn-app:hover {
      background: #0d6efd;
      color: white;
    }

    .btn-login {
      border: 1px solid #0d6efd;
      color: #0d6efd;
      background: transparent;
    }

    .btn-login:hover {
      background: #0d6efd;
      color: white;
    }

    .btn-signup {
      background: #0d6efd;
      color: white;
      border: none;
    }

    .btn-signup:hover {
      opacity: 0.9;
    }

    .btn-logout {
      background: #dc3545;
      color: white;
      border: none;
    }

    .btn-logout:hover {
      opacity: 0.9;
    }

    /* Card Styling */
    section {
      padding-top: 40px;
    }

    .bg-light {
      background-color: #e9ecef !important;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light sticky-top">
    <div class="container-fluid px-lg-4">
      <!-- Logo -->
      <a class="navbar-brand d-flex align-items-center" href="#">
        <img
          src="https://www.bing.com/th/id/OIP.5YGzsb62dMxHnIwvo20uCAHaEv?w=245&h=211&c=8&rs=1&qlt=90&o=6&dpr=1.3&pid=3.1&rm=2"
          alt="Logo"
        />
        <span>Indian Railway</span>
      </a>

      <!-- Toggle Button -->
      <button
        class="navbar-toggler border-0"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Nav Links -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#">About</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Packages</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Packages</a></li>
        </ul>

        <!-- Buttons (aligned right) - Not Logged In -->
        <div class="navbar-buttons d-flex flex-column flex-lg-row align-items-stretch align-items-lg-center gap-2 mt-3 mt-lg-0" id="notLoggedIn">
          <button class="btn btn-app w-100 w-lg-auto">
            <i class="fas fa-mobile-alt me-2"></i> Get the App
          </button>
          <button class="btn btn-login w-100 w-lg-auto" onclick="login()">Login</button>
          <button class="btn btn-signup w-100 w-lg-auto">Sign Up</button>
        </div>

        <!-- Buttons (aligned right) - Logged In -->
        <div class="navbar-buttons d-none flex-column flex-lg-row align-items-stretch align-items-lg-center gap-2 mt-3 mt-lg-0" id="loggedIn">
          <button class="btn btn-app w-100 w-lg-auto">
            <i class="fas fa-mobile-alt me-2"></i> Get the App
          </button>
          <button class="btn btn-logout w-100 w-lg-auto" onclick="logout()">Log Out</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Pulley Distance Detector Section -->
  <section class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-8 col-lg-5">
        <div class="bg-light p-4 p-lg-5 rounded">
          <h1 class="text-center mb-4 fw-bold">Pulley Distance Detector</h1>
          
          <div class="mb-3">
            <label for="imageUpload" class="form-label">Upload Image:</label>
            <input type="file" class="form-control" id="imageUpload" accept="image/*" onchange="previewImage()">
          </div>

          <div class="text-center mb-4">
            <button class="btn btn-secondary px-4" onclick="uploadAndDetect()">
              Upload & Detect
            </button>
          </div>

          <div id="imagePreview" class="text-center mb-3 d-none">
            <img id="previewImg" src="" alt="Preview" class="img-fluid rounded border" style="max-height: 400px; max-width: 100%;">
          </div>

          <div id="resultSection" class="d-none">
            <div class="alert alert-info" role="alert">
              <h5 class="alert-heading">Detection Complete!</h5>
              <hr>
              <p class="mb-0"><strong>Distance Detected:</strong> <span id="distanceResult">0</span> meters</p>
              <p class="mb-0"><strong>Status:</strong> <span id="statusResult">Normal</span></p>
            </div>
          </div>

          <div id="loadingSection" class="d-none text-center py-4">
            <div class="spinner-border text-secondary" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Analyzing image...</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    // Simulate user login state
    let isLoggedIn = false;

    function updateNavbar() {
      const notLoggedIn = document.getElementById('notLoggedIn');
      const loggedIn = document.getElementById('loggedIn');
      
      if (isLoggedIn) {
        notLoggedIn.classList.add('d-none');
        loggedIn.classList.remove('d-none');
        loggedIn.classList.add('d-flex');
      } else {
        loggedIn.classList.add('d-none');
        loggedIn.classList.remove('d-flex');
        notLoggedIn.classList.remove('d-none');
        notLoggedIn.classList.add('d-flex');
      }
    }

    function login() {
      isLoggedIn = true;
      updateNavbar();
      alert('You are now logged in!');
    }

    function logout() {
      isLoggedIn = false;
      updateNavbar();
      alert('You have been logged out!');
    }

    // Pulley Distance Detector Functions
    function previewImage() {
      const fileInput = document.getElementById('imageUpload');
      const file = fileInput.files[0];
      
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('previewImg').src = e.target.result;
          document.getElementById('imagePreview').classList.remove('d-none');
        };
        reader.readAsDataURL(file);
      }
    }

    function uploadAndDetect() {
      const fileInput = document.getElementById('imageUpload');
      const file = fileInput.files[0];
      
      if (!file) {
        alert('Please select an image first!');
        return;
      }

      // Show loading
      document.getElementById('loadingSection').classList.remove('d-none');
      document.getElementById('resultSection').classList.add('d-none');

      // Simulate detection process
      setTimeout(() => {
        // Generate random distance between 50-200 meters
        const distance = (Math.random() * 150 + 50).toFixed(2);
        const status = distance > 150 ? 'Warning: Check Required' : 'Normal';
        
        document.getElementById('distanceResult').textContent = distance;
        document.getElementById('statusResult').textContent = status;
        
        // Hide loading, show results
        document.getElementById('loadingSection').classList.add('d-none');
        document.getElementById('resultSection').classList.remove('d-none');
      }, 2000);
    }

    // Initialize navbar on page load
    updateNavbar();
  </script>
</body>
</html>